# ğŸ“° Blog CMS â€“ Headless CMS con Django

Proyecto que implementa un **CMS (Content Management System)** headless bÃ¡sico utilizando **Django** y **Django REST Framework**.
Permite a los usuarios registrarse, crear un blog personal, gestionar posts y etiquetas, y acceder a los datos mediante una API REST documentada.

---

## TecnologÃ­as Utilizadas

| TecnologÃ­a                | Uso                           |
| ------------------------- | ----------------------------- |
| **Python 3.14+**          | Lenguaje principal            |
| **Django 5.2,7**            | Framework backend             |
| **Django REST Framework** | API REST                      |
| **django-tinymce**        | Editor HTML en el admin       |
| **django-import-export**  | ExportaciÃ³n de datos          |
| **drf-yasg**              | DocumentaciÃ³n Swagger / Redoc |
| **SQLite**                | Base de datos para desarrollo |

---

## InstalaciÃ³n y ConfiguraciÃ³n

### 1. Clonar el repositorio

```bash
git clone https://github.com/danielachg28/proyecto1-blog-cms.git
cd blog-cms
```

### 2. Crear y activar entorno virtual

```bash
python -m venv myvenv
source myvenv/bin/activate   # En macOS/Linux
myvenv\Scripts\activate      # En Windows
```

### 3. Instalar dependencias

```bash
pip install -r requirements.txt
```

### 4. Aplicar migraciones

```bash
python manage.py makemigrations
python manage.py migrate
```

### 5. Crear superusuario

```bash
python manage.py createsuperuser
```

### 6. Ejecutar el servidor

```bash
python manage.py runserver
```

Abrir en el navegador:
[http://127.0.0.1:8000/](http://127.0.0.1:8000/)

---

## Funcionalidades Principales

- **Registro y login de usuarios**
- **Blog personal por usuario** (1:1 con `User`)
- **GestiÃ³n de posts y etiquetas** desde panel admin y API
- **TinyMCE** como editor de texto enriquecido
- **ExportaciÃ³n de datos a CSV/JSON** desde el admin
- **AutenticaciÃ³n por sesiÃ³n en API REST**
- **DocumentaciÃ³n Swagger y Redoc automÃ¡tica**

---

## Arquitectura de Modelos

```
User (Django built-in)
â””â”€â”€ Blog (1:1 con User)
    â””â”€â”€ Post (N:1 con Blog)
        â””â”€â”€ Tag (M:N con Post)
```

---

## API REST (Django Rest Framework)

### Endpoints principales

| Endpoint           | MÃ©todo     | DescripciÃ³n                | AutenticaciÃ³n |
| ------------------ | ---------- | -------------------------- | ------------- |
| `/api/register/`   | POST       | Registrar un nuevo usuario | âŒ No requiere |
| `/api-auth/login/` | GET        | Iniciar sesiÃ³n             | âœ… SÃ­          |
| `/api/blogs/`      | GET / POST | Ver o crear blogs          | âœ… SÃ­          |
| `/api/posts/`      | GET / POST | Ver o crear posts          | âœ… SÃ­          |
| `/api/tags/`       | GET / POST | Ver o crear etiquetas      | âœ… SÃ­          |
| `/swagger/`        | GET        | DocumentaciÃ³n Swagger      | âŒ No requiere |
| `/redoc/`          | GET        | DocumentaciÃ³n Redoc        | âŒ No requiere |

---

### Ejemplo de Registro (POST `/api/register/`)

```json
{
  "username": "usuario",
  "email": "usuario@example.com",
  "password": "1234"
}
```

Respuesta esperada:

```json
{
  "id": 3,
  "username": "usuario",
  "email": "usuario@example.com"
}
```

---

## AutenticaciÃ³n

Para realizar peticiones a la API (crear posts, blogs, tags), es necesario autenticarse:

1. Ir a `/api-auth/login/`
2. Iniciar sesiÃ³n con un usuario existente
3. Desde ahÃ­, acceder a `/api/posts/`, `/api/blogs/`, etc.

---

## Panel de AdministraciÃ³n

Acceso al panel administrativo:

[http://127.0.0.1:8000/admin/](http://127.0.0.1:8000/admin/)
Usuario: *superuser* creado en el paso 5

Desde el admin se puede:

* Crear/editar blogs, posts y etiquetas
* Editar contenido con **TinyMCE**
* Exportar datos con **django-import-export**

---

## Pruebas de la API (DRF)

CÃ³mo probar con Postman

1. Registrar usuario
POST http://127.0.0.1:8000/api/register/

2. Autenticarse
En cada peticiÃ³n â†’ pestaÃ±a Authorization â†’ Basic Auth
Usar usuario y contraseÃ±a creados.

3. Crear post
POST /api/posts/

{
  "title": "Primer post",
  "content": "Contenido del post"
}

---

## Pruebas de la API (GRAPHQL)

Como probar con Postman (GraphQL):
- Seleccionar pestaÃ±a de GraphQL y se visualizarÃ¡n las queries
- en la casilla de url: MÃ©todo: POST  https://teamwhiteprojectdc-production.up.railway.app/graphql/
- Al hacer el login, copiar el token y la pestaÃ±a de headers aÃ±adir:
  Key: Authorization
  Value: Bearer <token>
-Realizar las consultas


Como probar con GraphQL interfaz:

- Acceder a https://teamwhiteprojectdc-production.up.railway.app/graphql/
-Al hacer el login, copiar el token y la secciÃ³n de headers aÃ±adir:
{
  "Authorization": "Bearer <token>"
}


Consultas:
1. Registrar un usuario
mutation {
  registerUser(username: "usuario", email: "usuario@mail.com", password: "123456") {
    user {
      id
      username
      email
    }
    token
    refreshToken
    errors
  }
}


2. Login:
mutation {
  tokenAuth(username: "tu_usuario", password: "tu_password") {
    token
  }
}

3. Obtener el blog
{
  allBlogs {
    id
    title
    description
  }
}


4. Obtener todos los posts
{
  allPosts {
    id
    title
    content
    createdAt
    updatedAt
    blog {
      id
      title
    }
    tags {
      id
      name
    }
  }
}

5. Obtener todos los tags
{
  allTags {
    id
    name
    posts {
      id
      title
    }
  }
}


6. Crear un post
mutation {
  createPost(
    title: "TÃ­tulo del post",
    content: "Contenido del post",
  ) {
    post {
      id
      title
      content
      blog {
        id
        title
      }
      tags {
        id
        name
      }
    }
    errors
  }
}


7. Crear un tag:
mutation {
  createTag(
    name: "python"
    postIds: [19, 30]  # IDs de los posts que se quiere asociar
  ) {
    tag {
      id
      name
      posts {
        id
        title
      }
    }
    errors
  }
}






---


## ğŸ“˜ DocumentaciÃ³n de la API

* **Swagger UI:** [http://127.0.0.1:8000/swagger/](http://127.0.0.1:8000/swagger/)
* **Redoc UI:** [http://127.0.0.1:8000/redoc/](http://127.0.0.1:8000/redoc/)

Ambas interfaces permiten probar los endpoints directamente desde el navegador.

---

## ğŸ§¾ Estructura del Proyecto

```
 proyecto1-blog-cms/
â”‚
â”œâ”€â”€ blog/                         # Carpeta raÃ­z del proyecto Django
â”‚   â”‚
â”‚   â”œâ”€â”€ blog/                     # Proyecto principal de Django (configuraciÃ³n global)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ settings/             # Configuraciones por entorno
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py           # ConfiguraciÃ³n base (comÃºn a todos)
â”‚   â”‚   â”‚   â”œâ”€â”€ prod.py           # ConfiguraciÃ³n para producciÃ³n
â”‚   â”‚   â”‚   â””â”€â”€ dev.py            # ConfiguraciÃ³n para desarrollo
â”‚   â”‚   â”œâ”€â”€ urls.py               # URLs raÃ­z del proyecto
â”‚   â”‚   â”œâ”€â”€ wsgi.py               # Entrada WSGI (para Gunicorn u otros)
â”‚   â”‚   â””â”€â”€ asgi.py               # Entrada ASGI (para Django Channels o async)
â”‚   â”‚
â”‚   â”œâ”€â”€ auth_app/                 # AplicaciÃ³n
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ apps.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”œâ”€â”€ constants.py
â”‚   â”‚   â”œâ”€â”€ helpers.py
â”‚   â”‚   â”œâ”€â”€ admin.py
â”‚   â”‚   â”œâ”€â”€ tests.py
â”‚   â”‚   â”œâ”€â”€ views_graphql.py
â”‚   â”‚   â””â”€â”€ permissions.py
|   |
â”‚   â”œâ”€â”€ blog_app/                 # AplicaciÃ³n
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ apps.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”œâ”€â”€ serializers.py
â”‚   â”‚   â”œâ”€â”€ constants.py
â”‚   â”‚   â”œâ”€â”€ helpers.py
â”‚   â”‚   â”œâ”€â”€ api.py
â”‚   â”‚   â”œâ”€â”€ schema.py
â”‚   â”‚   â”œâ”€â”€ admin.py
â”‚   â”‚   â”œâ”€â”€ urls.py
â”‚   â”‚   â”œâ”€â”€ views.py
â”‚   â”‚   â””â”€â”€ permissions.py
â”‚   â”‚
â”‚   â”œâ”€â”€ tests/                    # Pruebas unitarias y de integraciÃ³n
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ factories.py
â”‚   â”‚   â”œâ”€â”€ test_api.py
â”‚   â”‚   â””â”€â”€ test_models.py
â”‚   â”‚
â”‚   â”œâ”€â”€ manage.py                 # Script de gestiÃ³n principal
â”‚   â”œâ”€â”€ pytest.py                 # Config opcional o entrada personalizada de pytest
â”‚   â”‚
â”‚   â”œâ”€â”€ requirements/             # Dependencias por entorno
â”‚   â”‚   â”œâ”€â”€ base.txt              # Dependencias comunes
â”‚   â”‚   â”œâ”€â”€ prod.txt              # Dependencias de producciÃ³n
â”‚   â”‚   â””â”€â”€ dev.txt               # Dependencias de desarrollo
â”‚   â”‚
â”‚   â”œâ”€â”€ Dockerfile                # Dockerfile base de producciÃ³n
â”‚   â”œâ”€â”€ Dockerfile-dev            # Dockerfile para entorno de desarrollo
â”‚   â””â”€â”€ docker-compose.yml        # Orquestador de servicios (DB, Redis, etc.)
â”‚   â”œâ”€â”€ .env                      # Variables de entorno locales (desarrollo)
â”‚   â”œâ”€â”€ .env.prod                 # Variables de entorno para producciÃ³n
â”‚   â”œâ”€â”€ start.sh                  # Script de inicio (ej. para Docker o entrypoint)
â”‚   â”œâ”€â”€ README.md                 #
â”‚   â”œâ”€â”€ .pre-commit-config.yaml   # ConfiguraciÃ³n de hooks (en raÃ­z del repo)
â”‚   â””â”€â”€ pyproject.toml            # ConfiguraciÃ³n de herramientas (Black, Ruff, etc.)
â”‚   â””â”€â”€ .gitignore                # Archivo de git
```

---
